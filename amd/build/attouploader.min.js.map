{"version":3,"sources":["../src/attouploader.js"],"names":["define","$","init","fileName","fileSize","uploadFileType","naturalWidth","naturalHeight","MEDIA_TYPE","VIDEO","IMAGE","AUDIO","AUTO_FINALIZE","TRUE","FALSE","NULL","ENTRY_STATUS","ENTRY_IMPORTING","ENTRY_CONVERTING","ENTRY_IMPORT","ENTRY_PRECONVERT","ENTRY_READY","ENTRY_DELETED","ENTRY_PENDING","ENTRY_MODERATE","ENTRY_BLOCKED","ENTRY_NO_CONTENT","UPLOAD_TOKEN_STATUS","PENDING","PARTIAL_UPLOAD","FULL_UPLOAD","CLOSED","TIMED_OUT","DELETED","createObjectURL","window","URL","file","webkitURL","revokeObjectURL","checkForm","files","val","prop","checkFileSize","checkFileType","fileType","indexOf","handleFileSelect","alertInfo","parseInt","size","typeResult","encodeURI","type","sizeResult","require","str","notification","get_strings","key","component","then","results","alert","html","fileInfo","sizeStr","dividedSize","name","toFixed","fail","exception","image","Image","onload","src","console","log","handleResetClick","checkNameString","regex","test","checkTagsString","checkMetadata","nameStr","tagsStr","descStr","flag","message","get_string","when","done","localizedString","handleSubmitClick","executeUploadProcess","sessionEnd","serverHost","ajax","url","cache","xmlData","dir","printErrorMessage","errorMessage","ks","uploadTokenId","deleteUploadToken","append","disableInsertButton","enableCancelButton","printSuccessMessage","id","tags","description","creatorId","output","enableInsertButton","getHiddenParameters","parent","document","getElementById","element","kalturahost","partnerid","uiconfid","width","height","updateHiddenParameters","css","opacity","disableCancelButton","createUploadToken","fd","FormData","data","contentType","scriptCharset","processData","async","dataType","findData","serviceURL","find","text","uploadTokenStatus","setTimeout","createMediaEntry","entryStatus","entryId","entryName","entryTags","entryDescription","entryCreatorId","controlId","trim","mediaType","uploadMediaFile","xhr","XHR","ajaxSettings","upload","addEventListener","e","newValue","loaded","total","attachUploadedFile","IMPORT","IMPORTING","on","remove"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Uploader Script used in atto plugin.\n *\n * @package   atto_yukaltura\n * @copyright (C) 2019-2020 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module atto_yukaltura/attouploader\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        /**\n         * Initial function.\n         * @access public\n         */\n        init: function() {\n\n            var fileName = \"\";\n            var fileSize = 0;\n\n            var uploadFileType = \"\";\n            var naturalWidth = 0;\n            var naturalHeight = 0;\n\n            var MEDIA_TYPE = {\n                VIDEO: 1,\n                IMAGE: 2,\n                AUDIO: 5\n            };\n\n            var AUTO_FINALIZE = {\n                TRUE: 1,\n                FALSE: 0,\n                NULL: -1\n            };\n\n            var ENTRY_STATUS = {\n                ENTRY_IMPORTING: -2,\n                ENTRY_CONVERTING: -1,\n                ENTRY_IMPORT: 0,\n                ENTRY_PRECONVERT: 1,\n                ENTRY_READY: 2,\n                ENTRY_DELETED: 3,\n                ENTRY_PENDING: 4,\n                ENTRY_MODERATE: 5,\n                ENTRY_BLOCKED: 6,\n                ENTRY_NO_CONTENT: 7\n            };\n\n            var UPLOAD_TOKEN_STATUS = {\n                PENDING: 0,\n                PARTIAL_UPLOAD: 1,\n                FULL_UPLOAD: 2,\n                CLOSED: 3,\n                TIMED_OUT: 4,\n                DELETED: 5\n            };\n\n            var createObjectURL = window.URL && window.URL.createObjectURL\n                    ? function(file) {\n                        return window.URL.createObjectURL(file);\n                    }\n                    : window.webkitURL && window.webkitURL.createObjectURL\n                        ? function(file) {\n                            return window.webkitURL.createObjectURL(file);\n                        }\n                        : undefined;\n\n            var revokeObjectURL = window.URL && window.URL.revokeObjectURL\n                    ? function(file) {\n                        return window.URL.revokeObjectURL(file);\n                    }\n                    : window.webkitURL && window.webkitURL.revokeObjectURL\n                        ? function(file) {\n                            return window.webkitURL.revokeObjectURL(file);\n                        }\n                        : undefined;\n\n            /**\n             * This function checks metadata.\n             * @access public\n             */\n            function checkForm() {\n                if ($(\"#fileData\") === null ||\n                    $(\"#fileData\").files === null ||\n                    $(\"#name\").val() === \"\" ||\n                    $(\"#tags\").val() === \"\" ||\n                    $(\"#type\").val() === \"\" ||\n                    $(\"#type\").val() === \"N/A\") {\n                    // Dsiable upload button.\n                    $(\"#entry_submit\").prop(\"disabled\", true);\n                    $(\"#entry\").val(\"\");\n                } else {\n                    // Enable upload button.\n                    $(\"#entry_submit\").prop(\"disabled\", false);\n                }\n            }\n\n            /**\n             * This function checks file size.\n             * @access public\n             * @return {bool} - The file can upload?\n             */\n            function checkFileSize() {\n                if (fileSize <= 0) {\n                    return false;\n                }\n                if (fileSize > 2000000000) {\n                    return false;\n                }\n                return true;\n            }\n\n            /**\n             * This function checks file type.\n             * @access public\n             * @param {string} fileType - file type of selected media.\n             * @return {string} - media type string for kaltura server.\n             */\n            function checkFileType(fileType) {\n                if (fileType.indexOf(\"video/avi\") != -1 || fileType.indexOf(\"video/x-msvideo\") != -1 ||\n                    fileType.indexOf(\"video/mpeg\") != -1 || fileType.indexOf(\"video/mpg\") != -1 ||\n                    fileType.indexOf(\"video/mp4\") != -1 || fileType.indexOf(\"video/ogg\") != -1 ||\n                    fileType.indexOf(\"video/quicktime\") != -1 || fileType.indexOf(\"video/VP8\") != -1 ||\n                    fileType.indexOf(\"video/x-flv\") != -1 || fileType.indexOf(\"video/x-f4v\") != -1 ||\n                    fileType.indexOf(\"video/x-matroska\") != -1 ||\n                    fileType.indexOf(\"video/x-ms-wmv\") != -1 || fileType.indexOf(\"video/webm\") != -1) {\n                    return \"video\";\n                }\n\n                if (fileType.indexOf(\"audio/ac3\") != -1 || fileType.indexOf(\"audio/ogg\") != -1 ||\n                    fileType.indexOf(\"audio/mpeg\") != -1 || fileType.indexOf(\"audio/mp4\") != -1 ||\n                    fileType.indexOf(\"audio/mp3\") != -1 ||\n                    fileType.indexOf(\"audio/wav\") != -1 || fileType.indexOf(\"audio/x-ms-wma\") != -1) {\n                    return \"audio\";\n                }\n\n                if (fileType.indexOf(\"image/gif\") != -1 || fileType.indexOf(\"image/jpeg\") != -1 ||\n                    fileType.indexOf(\"image/png\") != -1 || fileType.indexOf(\"image/tiff\") != -1) {\n                    return \"image\";\n                }\n\n                return \"N/A\";\n            }\n\n            /**\n             * This function is callback for selection of media file.\n             * @access public\n             */\n            function handleFileSelect() {\n\n                var alertInfo = '';\n\n                // There exists selected file.\n                if ($(\"#fileData\")) {\n                    // Get an object of selected file.\n                    var file = $(\"#fileData\").prop(\"files\")[0];\n\n                    fileSize = parseInt(file.size);\n                    var typeResult = checkFileType(encodeURI(file.type));\n                    var sizeResult = checkFileSize();\n\n                    require(['core/str', 'core/notification'], function(str, notification) {\n                        var strings = [\n                            {key: 'wrong_filesize', component: 'local_yumymedia'},\n                            {key: 'unsupported_filetype', component: 'local_yumymedia'},\n                            {key: 'filesize', component: 'local_yumymedia'},\n                            {key: 'mimetype', component: 'local_yumymedia'}\n                        ];\n                        str.get_strings(strings).then(function(results) {\n                            // When file size is wrong.\n                            if (sizeResult === false) {\n                                alertInfo += results[0];\n                            }\n                            // When file is no supported.\n                            if (typeResult == \"N/A\") {\n                                alertInfo += results[1];\n                            }\n\n                            // When any warning occures.\n                            if (alertInfo !== \"\") {\n                                window.alert(alertInfo);\n                                $(\"#file_info\").html(\"\");\n                                $(\"#name\").val(\"\");\n                                $(\"#tags\").val(\"\");\n                                $(\"#description\").val(\"\");\n                                $(\"#type\").val(\"\");\n                                $(\"#fileData\").val(\"\");\n                                naturalWidth = 0;\n                                naturalHeight = 0;\n                                uploadFileType = \"\";\n                            } else { // When any warning do not occures.\n                                var fileInfo = \"\";\n                                var sizeStr = \"\";\n                                var dividedSize = 0;\n\n                                fileName = file.name;\n\n                                if (fileSize > 1024 * 1024 * 1024) { // When file size exceeds 1GB.\n                                    dividedSize = fileSize / (1024 * 1024 * 1024);\n                                    sizeStr = dividedSize.toFixed(2) + \" G\";\n                                } else if (fileSize > 1024 * 1024) { // When file size exceeds 1MB.\n                                    dividedSize = fileSize / (1024 * 1024);\n                                    sizeStr = dividedSize.toFixed(2) + \" M\";\n                                } else if (fileSize > 1024) { // When file size exceeds 1kB.\n                                    dividedSize = fileSize / 1024;\n                                    sizeStr = dividedSize.toFixed(2) + \" k\";\n                                } else { // When file size under 1kB.\n                                    sizeStr = fileSize + \" \";\n                                }\n\n                                fileInfo += \"<div id=metadata_fields>\";\n                                fileInfo += results[2] + \": \" + sizeStr + \"bytes<br>\";\n                                fileInfo += results[3] + \":\" + encodeURI(file.type) + \"<br>\";\n                                fileInfo += \"</div><hr>\";\n\n                                $(\"#file_info\").html(fileInfo);\n                                $(\"#name\").val(fileName);\n                                $(\"#type\").val(typeResult);\n                            }\n                            return 0;\n                        }).fail(notification.exception);\n                        return 0;\n                    });\n\n                    if (typeResult == 'image') {\n                        var image = new Image();\n                        image.onload = function() {\n                            naturalWidth = image.naturalWidth;\n                            naturalHeight = image.naturalHeight;\n                            revokeObjectURL(image.src);\n                            window.console.log(naturalWidth);\n                            window.console.log(naturalHeight);\n                        };\n                        image.src = createObjectURL(file);\n                    } else {\n                        naturalWidth = 0;\n                        naturalHeight = 0;\n                    }\n\n                    uploadFileType = typeResult;\n                }\n\n                checkForm();\n            }\n\n            /**\n             * This function is callback for reset button.\n             * @access public\n             */\n            function handleResetClick() {\n                $(\"#file_info\").html(\"\");\n                $(\"#type\").val(\"\");\n                uploadFileType = \"\";\n                naturalWidth = 0;\n                naturalHeight = 0;\n            }\n\n            /**\n             * This function checks name of media.\n             * @access public\n             * @param {string} str - name of media.\n             * @return {bool} - if name is appropriate, return \"true\". Otherwise, return \"false\".\n             */\n            function checkNameString(str) {\n                var regex = /[\"$%&'~^\\\\`/]/;\n                if (regex.test(str) === true) {\n                    return false;\n                } else {\n                    return true;\n                }\n            }\n\n            /**\n             * This function checks tags of media.\n             * @access public\n             * @param {string} str - tagas of media.\n             * @return {bool} - if tags are appropriate, return \"true\". Otherwise, return \"false\".\n             */\n            function checkTagsString(str) {\n                var regex = /[!\"#$%&'~|^\\\\@`()[\\]{}:;+*/=<>?]/;\n                if (regex.test(str) === true) {\n                    return false;\n                } else {\n                    return true;\n                }\n            }\n\n            /**\n             * This function checks metadata of media.\n             * @access public\n             * @return {bool} - if metadata is appropriate, return \"true\". Otherwise, return \"false\".\n             */\n            function checkMetadata() {\n                var nameStr = $(\"#name\").val();\n                var tagsStr = $(\"#tags\").val();\n                var descStr = $(\"#description\").val();\n\n                var flag = true;\n\n                if (checkNameString(nameStr) === false) {\n                    require(['core/str'], function(str) {\n                        var message = str.get_string('wrong_name', 'local_yumymedia', null);\n                        $.when(message).done(function(localizedString) {\n                            window.alert(localizedString);\n                        });\n                    });\n                    flag = false;\n                }\n\n                if (checkTagsString(tagsStr) === false) {\n                    require(['core/str'], function(str) {\n                        var message = str.get_string('wrong_tags', 'local_yumymedia', null);\n                        $.when(message).done(function(localizedString) {\n                            window.alert(localizedString);\n                        });\n                    });\n                    flag = false;\n                }\n\n                if (checkNameString(descStr) === false) {\n                    require(['core/str'], function(str) {\n                        var message = str.get_string('wrong_desc', 'local_yumymedia', null);\n                        $.when(message).done(function(localizedString) {\n                            window.alert(localizedString);\n                        });\n                    });\n                    flag = false;\n                }\n\n                return flag;\n            }\n\n            /**\n             * This function is callback for submit button.\n             * @access public\n             * @return {bool} - if file is uploaded, return true. Otherwise, return false.\n             */\n            function handleSubmitClick() {\n\n                if (checkMetadata() === false) {\n                    return false;\n                }\n                if (checkFileSize() === false) {\n                    require(['core/str'], function(str) {\n                        var message = str.get_string('wrong_filesize', 'local_yumymedia', null);\n                        $.when(message).done(function(localizedString) {\n                            window.alert(localizedString);\n                        });\n                    });\n                    return false;\n                }\n\n                $(\"#entry_submit\").prop(\"disabled\", true);\n                executeUploadProcess(); // Executes upload.\n\n                return true;\n            }\n\n            /**\n             * This function close kaltura session.\n             * @access public\n             */\n            function sessionEnd() {\n                var serverHost = $(\"#kalturahost\").val(); // Get hostname of kaltura server.\n                var serviceURL = serverHost + \"/api_v3/service/session/action/end\";\n\n                // Transmits data.\n                $.ajax({\n                    type: \"GET\",\n                    url: serviceURL,\n                    cache: false\n                })\n                .done(function(xmlData) {\n                    // Response is not XML.\n                    if (xmlData === null) {\n                        window.console.log(\"Cannot delete the uploadToken ! (Cannot get a XML response.)\");\n                    } else {\n                        window.console.log(\"Kaltura Session has been deleted.\");\n                    }\n                })\n                .fail(function(xmlData) {\n                    window.console.log(\"Cannot delete the uploadToken ! (Cannot connect to content server.)\");\n                    if (xmlData !== null) {\n                        window.console.dir(xmlData);\n                    }\n                });\n            }\n\n            /**\n             * This function prints error message.\n             * @access public\n             * @param {string} errorMessage - string of error message.\n             * @param {string} ks - session string of kaltura connecion;\n             * @param {string} uploadTokenId - upload token id.\n             */\n            function printErrorMessage(errorMessage, ks, uploadTokenId) {\n                if (ks !== \"\" && uploadTokenId !== \"\") {\n                    deleteUploadToken();\n                }\n\n                $(\"#upload_info\").html(\"\");\n                $(\"#upload_info\").append(\"<font color=\\\"red\\\">\" + errorMessage + \"</font><br>\");\n\n                disableInsertButton();\n                enableCancelButton();\n            }\n\n            /**\n             * This function prints success message.\n             * @access public\n             * @param {string} id - id of media entry.\n             * @param {string} name - name of media entry.\n             * @param {string} tags - tags of media entry.\n             * @param {string} description - description of media entry.\n             * @param {string} creatorId - username of creator.\n             */\n            function printSuccessMessage(id, name, tags, description, creatorId) {\n\n                require(['core/str', 'core/notification'], function(str, notification) {\n                    var strings = [\n                        {key: 'upload_success', component: 'local_yumymedia'},\n                        {key: 'entryid_header', component: 'local_yumymedia'},\n                        {key: 'name_header', component: 'local_yumymedia'},\n                        {key: 'tags_header', component: 'local_yumymedia'},\n                        {key: 'desc_header', component: 'local_yumymedia'},\n                        {key: 'creatorid_header', component: 'local_yumymedia'},\n                        {key: 'insert_media', component: 'atto_yukaltura'}\n                    ];\n                    str.get_strings(strings).then(function(results) {\n                        var output = '<h3>' + results[0] + '</h3>';\n                        output += '<table border=\"2\" cellpadding=\"5\">';\n                        output += '<tr><td>' + results[1] + '</td><td>' + id + '</td></tr>';\n                        output += '<tr><td>' + results[2] + '</td><td>' + name + '</td></tr>';\n                        output += '<tr><td>' + results[3] + '</td><td>' + tags + '</td></tr>';\n                        output += '<tr><td>' + results[4] + '</td><td>' + description + '</td></tr>';\n                        output += '<tr><td>' + results[5] + '</td><td>' + creatorId + '</td></tr>';\n                        output += '</table>';\n                        output += '<br>';\n                        output += '<p><font color=\"red\">' + results[6] + '</font></p>';\n                        $(\"#upload_info\").html(output);\n                        return 0;\n                    }).fail(notification.exception);\n                });\n\n                // Enable dialogue buttons.\n                enableInsertButton();\n                enableCancelButton();\n            }\n\n            /**\n             * This function get hidden parameters.\n             * @access public\n             */\n            function getHiddenParameters() {\n                // Create new element if entry id element is null.\n                if (parent.document.getElementById('yukaltura_select_id') === null ||\n                    parent.document.getElementById('yukaltura_select_id')[0] === null) {\n                    var element = $('body', parent.document);\n\n                    var str = '<input type=\"hidden\" name=\"yukaltura_select_id\" id=\"yukaltura_select_id\" value=\"\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_select_name\" id=\"yukaltura_select_name\" value=\"\">';\n                    element.append(str);\n\n                    var kalturahost = $('#kalturahost').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_host\" id=\"yukaltura_host\" value=\"';\n                    str = str + kalturahost + '\">';\n                    element.append(str);\n\n                    var partnerid = $('#partnerid').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_partnerid\" id=\"yukaltura_partnerid\" value=\"';\n                    str = str + partnerid + '\">';\n                    element.append(str);\n\n                    var uiconfid = $('#uiconfid').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_uiconfid\" id=\"yukaltura_uiconfid\" value=\"';\n                    str = str + uiconfid + '\">';\n                    element.append(str);\n\n                    var width = $('#player_width').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_width\" id=\"yukaltura_width\" value=\"' + width + '\">';\n                    element.append(str);\n\n                    var height = $('#player_height').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_height\" id=\"yukaltura_height\" value=\"' + height + '\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_filetype\" id=\"yukaltura_filetype\" value=\"';\n                    str += uploadFileType + '\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_filetype\" id=\"yukaltura_filetype\" value=\"\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_naturalwidth\" id=\"yukaltura_naturalwidth\" value=\"\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_naturalheight\" id=\"yukaltura_naturalheight\" value=\"\">';\n                    element.append(str);\n                }\n            }\n\n            /**\n             * This function update hidden parameters,\n             * @access public\n             * @param {string} id - id of media entry.\n             * @param {string} name - name of media entry.\n             */\n            function updateHiddenParameters(id, name) {\n                if (id !== null && id !== '' &&\n                    parent.document.getElementById('yukaltura_select_id') !== null &&\n                    parent.document.getElementById('yukaltura_select_id')[0] !== null) {\n                    // Set entry id of selected media.\n                    $('#yukaltura_select_id', parent.document).val(id);\n                    // Set entry name of selected media.\n                    $('#yukaltura_select_name', parent.document).val(name);\n\n                    $('#yukaltura_filetype', parent.document).val(uploadFileType);\n                    $('#yukaltura_naturalwidth', parent.document).val(naturalWidth);\n                    $('#yukaltura_naturalheight', parent.document).val(naturalHeight);\n                }\n            }\n\n            /**\n             * This function enable insert button.\n             * @access public\n             */\n            function enableInsertButton() {\n                // Eable insert button.\n                $('#yukaltura_insert_btn', parent.document).prop(\"disabled\", false);\n                $('#yukaltura_insert_btn', parent.document).css({opacity: \"1.0\"});\n            }\n\n            /**\n             * This function disable insert button.\n             * @access public\n             */\n            function disableInsertButton() {\n                // Disable insert button.\n                $('#yukaltura_insert_btn', parent.document).prop(\"disabled\", true);\n                $('#yukaltura_insert_btn', parent.document).css({opacity: \"0.5\"});\n            }\n\n            /**\n             * This function enable cancel button.\n             * @access public\n             */\n            function enableCancelButton() {\n                // Eable cancel button.\n                $('#yukaltura_cancel_btn', parent.document).prop(\"disabled\", false);\n                $('#yukaltura_cancel_btn', parent.document).css({opacity: \"1.0\"});\n            }\n\n            /**\n             * This function disable cancel button.\n             * @access public\n             */\n            function disableCancelButton() {\n                // Disable cancel button.\n                $('#yukaltura_cancel_btn', parent.document).prop(\"disabled\", true);\n                $('#yukaltura_cancel_btn', parent.document).css({opacity: \"0.5\"});\n            }\n\n            /**\n             * This function executes upload process.\n             * @access public\n             */\n            function executeUploadProcess() {\n                var serverHost = $(\"#kalturahost\").val(); // Get hostname of kaltura server.\n                var ks = $(\"#ks\").val(); // Get session id.\n\n                disableInsertButton();\n                disableCancelButton();\n\n                getHiddenParameters();\n\n                // Create upload token.\n                createUploadToken(serverHost, ks);\n            }\n\n            /**\n             * This function deletes upload token.\n             * @access public\n             * @param {string} serverHost - hostname of kaltura server.\n             * @param {string} ks - session string of kaltura connection.\n             * @param {string} uploadTokenId - token id for uploading.\n             * @return {bool} - if upload token is deleted, return true.\n             */\n            function deleteUploadToken(serverHost, ks, uploadTokenId) {\n                var fd = new FormData();\n                var flag;\n\n                // Set form data.\n                fd.append(\"action\", \"delete\");\n                fd.append(\"ks\", ks);\n                fd.append(\"uploadTokenId\", uploadTokenId);\n\n                // Set transmission data.\n                var postData = {\n                    type: \"POST\",\n                    data: fd,\n                    cache: false,\n                    contentType: false,\n                    scriptCharset: \"utf-8\",\n                    processData: false,\n                    async: true,\n                    dataType: \"xml\"\n                };\n\n                var serviceURL = serverHost + \"/api_v3/service/uploadToken/action/delete\";\n\n                // Transmits a data.\n                $.ajax(\n                    serviceURL, postData\n                )\n                .done(function(xmlData) {\n                    // When response is not XML.\n                    if (xmlData === null) {\n                        flag = false;\n                    }\n                    flag = true;\n                })\n                .fail(function(xmlData) {\n                    flag = false;\n                    if (xmlData !== null) {\n                        window.console.dir(xmlData);\n                    }\n                });\n\n                return flag;\n            }\n\n            /**\n             * This function creates upload token.\n             * @access public\n             * @param {string} serverHost - hostname of kaltura server.\n             * @param {string} ks - session string of kaltura connection.\n             */\n            function createUploadToken(serverHost, ks) {\n                var uploadTokenId;\n                var findData;\n\n                var file = $(\"#fileData\").prop(\"files\")[0];\n\n                fileSize = parseInt(encodeURI(file.size));\n\n                var postData = {\n                    type: \"GET\",\n                    cache: false,\n                    async: true,\n                    contentType: false,\n                    scriptCharset: \"utf-8\",\n                    dataType: \"xml\"\n                };\n\n                var serviceURL = serverHost + \"/api_v3/service/uploadToken/action/add?ks=\" + ks;\n                serviceURL = serviceURL + \"&uploadToken:objectType=KalturaUploadToken\";\n                serviceURL = serviceURL + \"uploadToken:fileName=\" + encodeURI(fileName);\n                serviceURL = serviceURL + \"&uploadToken:fileSize=\" + fileSize;\n                serviceURL = serviceURL + \"&uploadToken:autoFinalize=\" + AUTO_FINALIZE.NULL;\n\n                // Transmits data.\n                $.ajax(\n                    serviceURL, postData\n                )\n                .done(function(xmlData) {\n                    // Response is not XML.\n                    if (xmlData === null) {\n                        printErrorMessage(\"Cannot create upload token !<br>(Cannot get a XML response.)\");\n                        return;\n                    }\n\n                    // Get a tag of error code.\n                    findData = $(xmlData).find(\"code\");\n                    // There exists error code.\n                    if (findData !== null && typeof findData !== undefined && findData.text() !== \"\") {\n                        printErrorMessage(\"Cannot create upload token !<br>(\" + findData.text() + \")\");\n                        return;\n                    }\n\n                    findData = $(xmlData).find(\"status\");\n                    // There not exists upload token id.\n                    if (findData === null || typeof findData === undefined || findData.text() === \"\") {\n                        printErrorMessage(\"Cannot create upload token !<br>(Cannot get status of upload token.)\");\n                        return;\n                    }\n\n                    var uploadTokenStatus = findData.text();\n                    if (uploadTokenStatus != UPLOAD_TOKEN_STATUS.PENDING) {\n                        printErrorMessage(\"Cannot create upload token !<br>(UPLOAD_TOKEN_STATUS : \" + uploadTokenStatus + \")\");\n                        return;\n                    }\n                    // Get upload token id.\n                    findData = $(xmlData).find(\"id\");\n                    // There not exists upload token id.\n                    if (findData === null || typeof findData === undefined || findData.text() === \"\") {\n                        printErrorMessage(\"Cannot create uplaod token !<br>(Cannot get an uploadTokenId.)\");\n                        return;\n                    }\n                    uploadTokenId = findData.text();\n                    // Entry metadata.\n                    setTimeout(function() {\n                        createMediaEntry(serverHost, ks, uploadTokenId);\n                    }, 50);\n\n                })\n                .fail(function(xmlData) {\n                    if (xmlData !== null) {\n                        window.console.dir(xmlData);\n                    }\n                    printErrorMessage(\"Cannot create upload token !<br>(Cannot connect to kaltura server.)\");\n                });\n            }\n\n            /**\n             * This function creates media entry.\n             * @access public\n             * @param {string} serverHost - hostname of kaltura server.\n             * @param {string} ks - session string of kaltura connecion;\n             * @param {string} uploadTokenId - upload token id.\n             */\n            function createMediaEntry(serverHost, ks, uploadTokenId) {\n                var findData;\n                var entryStatus;\n                var entryId = \"\";\n                var entryName = \"\";\n                var entryTags = \"\";\n                var entryDescription = \"\";\n                var entryCreatorId = \"\";\n\n                var nameStr = $(\"#name\").val();\n                var tagsStr = $(\"#tags\").val();\n                var descStr = $(\"#description\").val();\n                var controlId = $(\"#controlId\").val();\n                var creatorId = $(\"#creatorId\").val();\n\n                nameStr = nameStr.trim();\n                tagsStr = tagsStr.trim();\n                if (descStr !== null) {\n                    descStr = descStr.trim();\n                }\n\n                var fd = new FormData();\n\n                // Creates form data.\n                fd.append(\"action\", \"add\");\n                fd.append(\"ks\", ks);\n                fd.append(\"entry:objectType\", \"KalturaMediaEntry\");\n\n                var type = $(\"#type\").val();\n                var mediaType = \"\";\n\n                if (type == \"image\") {\n                    mediaType = MEDIA_TYPE.IMAGE;\n                } else if (type == \"audio\") {\n                    mediaType = MEDIA_TYPE.AUDIO;\n                } else {\n                    mediaType = MEDIA_TYPE.VIDEO;\n                }\n\n                fd.append(\"entry:mediaType\", mediaType);\n                fd.append(\"entry:sourceType\", 1);\n                fd.append(\"entry:name\", nameStr);\n                fd.append(\"entry:tags\", tagsStr);\n                if (descStr !== null && descStr !== \"\") {\n                    fd.append(\"entry:description\", descStr);\n                } else {\n                    fd.append(\"entry:description\", \"\");\n                }\n\n                fd.append(\"entry:categories\", $(\"#categories\").val());\n\n                if (controlId !== null && controlId !== \"\") {\n                    fd.append(\"entry:accessControlId\", controlId);\n                }\n\n                fd.append(\"entry:creatorId\", creatorId);\n                fd.append(\"entry:userId\", creatorId);\n\n                // Creates transmission data.\n                var postData = {\n                    type: \"POST\",\n                    data: fd,\n                    cache: false,\n                    async: true,\n                    contentType: false,\n                    scriptCharset: \"utf-8\",\n                    processData: false,\n                    dataType: \"xml\"\n                };\n\n                var serviceURL = serverHost + \"/api_v3/service/media/action/add\";\n\n                // Transmits data.\n                $.ajax(\n                    serviceURL, postData\n                )\n                .done(function(xmlData) {\n                    // Response is not XML.\n                    if (xmlData === null || typeof xmlData === undefined) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot create media entry !<br>(Cannot get a XML response.)\");\n                        return;\n                    }\n\n                    // Get a tag of error code.\n                    findData = $(xmlData).find(\"code\");\n                    // There exists an error code.\n                    if (findData !== null && typeof findData !== undefined && findData.text() !== \"\") {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot create media entry !<br>(\" + findData.text() + \")\");\n                        return;\n                    }\n\n                    // Get a tag of status.\n                    findData = $(xmlData).find(\"status\");\n                    // There not exists a tag of status.\n                    if (findData === null || typeof findData === undefined || findData.text() === \"\") {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot create media entyry !<br>(Cannot get a mediaEntryStatus.)\");\n                        return;\n                    }\n\n                    // Get a value of status.\n                    entryStatus = findData.text();\n                    // When uploading of metadata failed.\n                    if (entryStatus != ENTRY_STATUS.ENTRY_NO_CONTENT) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot create media entry!<br>(mediaEntryStatus: \" + entryStatus + \")\");\n                        return;\n                    }\n\n                    // Get a tag of entry id.\n                    findData = $(xmlData).find(\"id\");\n                    // Get a value of entry id.\n                    entryId = findData.text();\n                    // Get a tag of name.\n                    findData = $(xmlData).find(\"name\");\n                    // Get a value of name.\n                    entryName = findData.text();\n                    // Get a tag of tags.\n                    findData = $(xmlData).find(\"tags\");\n                    // Get a value of tags.\n                    entryTags = findData.text();\n                    // Get a tag of description.\n                    findData = $(xmlData).find(\"description\");\n                    // There exists description.\n                    if (findData !== null && typeof findData !== undefined && findData.text() !== \"\") {\n                        // Get a value of description.\n                        entryDescription = findData.text();\n                    } else {\n                        entryDescription = \"\";\n                    }\n                    // Get a tago of creator id.\n                    findData = $(xmlData).find(\"creatorId\");\n                    // Get a value of creator id.\n                    entryCreatorId = findData.text();\n\n                    if (entryId === null || entryId === \"\" || entryName === null || entryName === \"\" ||\n                        entryTags === null || entryTags === \"\" || entryCreatorId === null || entryCreatorId === \"\" ||\n                        descStr !== \"\" && (entryDescription === null || entryDescription === \"\")) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"There exists wrong information(s) <br>\");\n                        return;\n                    }\n\n                    // Associate uploaded file with media entry.\n                    setTimeout(function() {\n                        uploadMediaFile(serverHost, ks, uploadTokenId, entryId);\n                    }, 50);\n\n                })\n                .fail(function(xmlData) {\n                    if (xmlData !== null) {\n                        window.console.dir(xmlData);\n                    }\n                    deleteUploadToken(serverHost, ks, uploadTokenId);\n                    printErrorMessage(\"Cannot create media entry !<br>(Cannot connect to kaltura server.)\");\n                    return;\n                });\n            }\n\n            /**\n             * This function uploads media file.\n             * @access public\n             * @param {string} serverHost - hostname of kaltura server.\n             * @param {string} ks - session string of kaltura connection.\n             * @param {string} uploadTokenId - upload token id.\n             * @param {string} entryId - id of media entry.\n             */\n            function uploadMediaFile(serverHost, ks, uploadTokenId, entryId) {\n                var findData;\n                var fd = new FormData();\n\n                // Creates form data.\n                fd.append(\"action\", \"upload\");\n                fd.append(\"ks\", ks);\n                fd.append(\"uploadTokenId\", uploadTokenId);\n                fd.append(\"fileData\", $(\"input[name='fileData']\").prop(\"files\")[0], encodeURI(fileName), fileSize);\n                fd.append(\"resume\", false);\n                fd.append(\"finalChunk\", true);\n                fd.append(\"resumeAt\", 0);\n\n                // Creates tnramission data.\n                var postData = {\n                    type: \"POST\",\n                    data: fd,\n                    cache: false,\n                    async: true,\n                    contentType: false,\n                    scriptCharset: \"utf-8\",\n                    processData: false,\n                    dataType: \"xml\",\n                    xhr: function() {\n                        var XHR = $.ajaxSettings.xhr();\n                        if (XHR.upload) {\n                            XHR.upload.addEventListener(\"progress\", function(e) {\n                                var newValue = parseInt(e.loaded / e.total * 100);\n                                $(\"#pvalue\").html(parseInt(newValue));\n                            }, false);\n                        }\n                        return XHR;\n                    }\n                };\n\n                $(\"#upload_info\").html(\"\");\n\n                require(['core/str'], function(str) {\n                    var message = str.get_string('uploader_uploading', 'local_yumymedia', null);\n                    $.when(message).done(function(localizedString) {\n                        $(\"#upload_info\").append(localizedString + \"<br>\");\n                    });\n                });\n\n                require(['core/str'], function(str) {\n                    var message = str.get_string('progress', 'local_yumymedia', null);\n                    $.when(message).done(function(localizedString) {\n                        var str = \"<p>\" + localizedString;\n                        str = str + \": <span id=\\\"pvalue\\\" style=\\\"color:#00b200\\\">0.00</span> %</p>\";\n                        $(\"#upload_info\").append(str);\n                    });\n                });\n\n                var serviceURL = serverHost + \"/api_v3/service/uploadToken/action/upload\";\n\n                // Transmits data.\n                $.ajax(\n                    serviceURL, postData\n                )\n                .done(function(xmlData) {\n                    // Response is not XML.\n                    if (xmlData === null) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot upload the video !<br>(Cannot get a XML response.)\");\n                        return;\n                    }\n\n                    // Get a tag of error code.\n                    findData = $(xmlData).find(\"code\");\n                    // There exists error code.\n                    if (findData !== null && typeof findData !== undefined && findData.text() !== \"\") {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot upload the video !<br>(\" + findData.text() + \")\");\n                        return;\n                    }\n\n                    // Get upload token id.\n                    findData = $(xmlData).find(\"status\");\n                    // There not exists upload token id.\n                    if (findData === null || typeof findData === undefined || findData.text() === \"\") {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot upload the video !<br>(Cannot get an uploadTokenStatus.)\");\n                        return;\n                    }\n\n                    var uploadTokenStatus = findData.text();\n                    if (uploadTokenStatus != UPLOAD_TOKEN_STATUS.FULL_UPLOAD &&\n                        uploadTokenStatus != UPLOAD_TOKEN_STATUS.PARTIAL_UPLOAD) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot upload the video !<br>(UPLOAD_TOKEN_STATUS : \" + uploadTokenStatus + \")\");\n                        return;\n                    } else {\n                        window.console.log(\"File chunk have been transmitted.\");\n                    }\n\n                    require(['core/str'], function(str) {\n                        var message = str.get_string('attach_file', 'local_yumymedia', null);\n                        $.when(message).done(function(localizedString) {\n                            $(\"#upload_info\").append(localizedString + \"<br>\");\n                        });\n                    });\n\n                    // Create media entry.\n                    setTimeout(function() {\n                        attachUploadedFile(serverHost, ks, uploadTokenId, entryId);\n                    }, 1000);\n\n                })\n                .fail(function(xmlData) {\n                    if (xmlData !== null) {\n                        window.console.dir(xmlData);\n                    }\n                    deleteUploadToken(serverHost, ks, uploadTokenId);\n                    printErrorMessage(\"Cannot upload the file !<br>(Cannot connect to contents server.)\");\n                    return;\n                });\n            }\n\n            /**\n             * This function uploads metadata.\n             * @access public\n             * @param {string} serverHost - hostname of kaltura server.\n             * @param {string} ks - session string of kaltura connection.\n             * @param {string} uploadTokenId - upload token id.\n             * @param {string} entryId - id of media entry.\n             */\n            function attachUploadedFile(serverHost, ks, uploadTokenId, entryId) {\n                var entryStatus;\n                var entryName = \"\";\n                var entryTags = \"\";\n                var entryDescription = \"\";\n                var entryCreatorId = \"\";\n\n                var findData;\n\n                // Creates form data.\n                var fd = new FormData();\n                fd.append(\"action\", \"addContent\");\n                fd.append(\"ks\", ks);\n                fd.append(\"entryId\", entryId);\n                fd.append(\"resource:objectType\", \"KalturaUploadedFileTokenResource\");\n                fd.append(\"resource:token\", uploadTokenId);\n\n                // Creates transmission data.\n                var postData = {\n                    type: \"POST\",\n                    data: fd,\n                    cache: false,\n                    async: true,\n                    contentType: false,\n                    scriptCharset: \"utf-8\",\n                    processData: false,\n                    dataType: \"xml\"\n                };\n\n                var serviceURL = serverHost + \"/api_v3/service/media/action/addContent\";\n\n                // Transmits data.\n                $.ajax(\n                    serviceURL, postData\n                )\n                .done(function(xmlData) {\n                    // Response is not XML.\n                    if (xmlData === null || typeof xmlData === undefined) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot attach uploaded file !<br>(Cannot get a XML response.)\");\n                        return;\n                    }\n\n                    // Get a tag of error code.\n                    findData = $(xmlData).find(\"code\");\n                    // There exists error code.\n                    if (findData !== null && typeof findData !== undefined && findData.text() !== \"\") {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot attach uploaded file !<br>(\" + findData.text() + \")\");\n                        return;\n                    }\n\n                    // Get a tag of status.\n                    findData = $(xmlData).find(\"status\");\n                    // There not exists a tag of status.\n                    if (findData === null || typeof findData === undefined || findData.text() === \"\") {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot attach uploaded file !<br>(Cannot get a mediaEntryStatus.)\");\n                        return;\n                    }\n\n                    // Get a value of status.\n                    entryStatus = findData.text();\n                    // When uploading of metadata failed.\n                    if (entryStatus != ENTRY_STATUS.ENTRY_READY && entryStatus != ENTRY_STATUS.ENTRY_PENDING &&\n                        entryStatus != ENTRY_STATUS.ENTRY_PRECONVERT && entryStatus != ENTRY_STATUS.IMPORT &&\n                        entryStatus != ENTRY_STATUS.IMPORTING) {\n                        deleteUploadToken(serverHost, ks, uploadTokenId);\n                        printErrorMessage(\"Cannot attach uploaded file !<br>(mediaEntryStatus: \" + entryStatus + \")\");\n                        return;\n                    }\n\n                    // Get a tag of entry id.\n                    findData = $(xmlData).find(\"id\");\n                    // Get a value of entry id.\n                    entryId = findData.text();\n                    // Get a tag of name.\n                    findData = $(xmlData).find(\"name\");\n                    // Get a value of name.\n                    entryName = findData.text();\n                    // Get a tag of tags.\n                    findData = $(xmlData).find(\"tags\");\n                    // Get a value of tags.\n                    entryTags = findData.text();\n                    // Get a tag of description.\n                    findData = $(xmlData).find(\"description\");\n                    // There exists description.\n                    if (findData !== null && typeof findData !== undefined && findData.text() !== \"\") {\n                        // Get a value of description.\n                        entryDescription = findData.text();\n                    } else {\n                        entryDescription = \"\";\n                    }\n                    // Get a tago of creator id.\n                    findData = $(xmlData).find(\"creatorId\");\n                    // Get a value of creator id.\n                    entryCreatorId = findData.text();\n\n                    // Prints success message.\n                    printSuccessMessage(entryId, entryName, entryTags, entryDescription, entryCreatorId);\n                    // Update hidden parameters on editors' page.\n                    updateHiddenParameters(entryId, entryName);\n\n                })\n                .fail(function(xmlData) {\n                    if (xmlData !== null) {\n                        window.console.dir(xmlData);\n                    }\n                    deleteUploadToken(serverHost, ks, uploadTokenId);\n                    printErrorMessage(\"Cannot attach uploaded file !<br>(Cannot connect to kaltura server.)\");\n                    return;\n                });\n            }\n\n            /**\n             * This function removes hidden parameters in parent document.\n             * @access public\n             */\n            function removeParameters() {\n                $('#yukaltura_select_id', parent.document).remove();\n                $('#yukaltura_select_name', parent.document).remove();\n                $('#yukaltura_host', parent.document).remove();\n                $('#yukaltura_partnerid', parent.document).remove();\n                $('#yukaltura_uiconfid', parent.document).remove();\n                $('#yukaltura_width', parent.document).remove();\n                $('#yukaltura_height', parent.document).remove();\n                $('#yukaltura_filetype', parent.document).remove();\n                $('#yukaltura_naturalwidth', parent.document).remove();\n                $('#yukaltura_naturalheight', parent.document).remove();\n            }\n\n            // This function execute when window is chagned.\n            $(window).on(\"change\", function() {\n                checkForm();\n            });\n\n            // This function execute when window is uloaded.\n            $(window).on(\"unload\", function() {\n                sessionEnd();\n            });\n\n            $(\"#fileData\").on(\"change\", function() {\n                handleFileSelect();\n            });\n\n            $(\"#name\").on(\"change\", function() {\n                checkForm();\n            });\n\n            $(\"#tags\").on(\"change\", function() {\n                checkForm();\n            });\n\n            $(\"#entry_submit\").on(\"click\", function() {\n                handleSubmitClick();\n            });\n\n            $(\"#entry_reset\").on(\"click\", function() {\n                handleResetClick();\n            });\n\n            removeParameters();\n            // Dsiable Insert button.\n            disableInsertButton();\n            // Enable cancel button.\n            enableCancelButton();\n        }\n    };\n});\n"],"file":"attouploader.min.js"}