{"version":3,"sources":["../src/attoselector.js"],"names":["define","$","init","changeSort","url","val","location","href","removeParameters","parent","document","prop","css","opacity","clickThumbnailImage","e","selectId","target","id","selectName","alt","fileType","naturalWidth","naturalHeight","html","getElementById","element","str","append","kalturahost","partnerid","uiconfid","width","height","studio","remove","on"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Media Secctor script for kaltura media embed.\n *\n * @package   atto_yukaltura\n * @copyright (C) 2019-2021 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module atto_yukaltura/attoselector\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        /**\n         * Initial function.\n         * @access public\n         */\n        init: function() {\n\n            /**\n             * This function reflects change of sort option.\n             * @access public\n             */\n            function changeSort() {\n                // Get url.\n                var url = $(\"#selectorSort\").val();\n                // Change url of selector window.\n                location.href = url;\n\n                removeParameters();\n                // Dsiable Insert button.\n                $(\"#yukaltura_insert_btn\", parent.document).prop(\"disabled\", true);\n                $(\"#yukaltura_insert_btn\", parent.document).css({opacity: \"0.5\"});\n            }\n\n            /**\n             * This is callback function for thumbnail click.\n             * @access public\n             * @param {object} e - event object of target image.\n             */\n            function clickThumbnailImage(e) {\n                var selectId = e.target.id;\n                var selectName = e.target.alt;\n\n                var fileType = $('#' + selectId + '_filetype').val();\n                var naturalWidth = $('#' + selectId + '_width').val();\n                var naturalHeight = $('#' + selectId + '_height').val();\n\n                // Set name of selected media.\n                $(\"#select_name\").html(selectName);\n\n                // Create new element if entry id element is null.\n                if (parent.document.getElementById('yukaltura_select_id') === null ||\n                    parent.document.getElementById('yukaltura_select_id')[0] === null) {\n                    var element = $('body', parent.document);\n\n                    var str = '<input type=\"hidden\" name=\"yukaltura_select_id\" id=\"yukaltura_select_id\" value=\"\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_select_name\" id=\"yukaltura_select_name\" value=\"\">';\n                    element.append(str);\n\n                    var kalturahost = $('#kalturahost').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_host\" id=\"yukaltura_host\" value=\"';\n                    str = str + kalturahost + '\">';\n                    element.append(str);\n\n                    var partnerid = $('#partnerid').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_partnerid\" id=\"yukaltura_partnerid\" value=\"';\n                    str = str + partnerid + '\">';\n                    element.append(str);\n\n                    var uiconfid = $('#uiconfid').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_uiconfid\" id=\"yukaltura_uiconfid\" value=\"';\n                    str = str + uiconfid + '\">';\n                    element.append(str);\n\n                    var width = $('#player_width').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_width\" id=\"yukaltura_width\" value=\"' + width + '\">';\n                    element.append(str);\n\n                    var height = $('#player_height').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_height\" id=\"yukaltura_height\" value=\"' + height + '\">';\n                    element.append(str);\n\n                    var studio = $('#player_studio').val();\n                    str = '<input type=\"hidden\" name=\"yukaltura_playerstudio\" id=\"yukaltura_playerstudio\" value=\"' + studio + '\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_filetype\" id=\"yukaltura_filetype\" value=\"\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_naturalwidth\" id=\"yukaltura_naturalwidth\" value=\"\">';\n                    element.append(str);\n\n                    str = '<input type=\"hidden\" name=\"yukaltura_naturalheight\" id=\"yukaltura_naturalheight\" value=\"\">';\n                    element.append(str);\n                }\n\n                // Set entry id of selected media.\n                $('#yukaltura_select_id', parent.document).val(selectId);\n                // Set entry name of selected media.\n                $('#yukaltura_select_name', parent.document).val(selectName);\n                // Set natural width of selected media.\n                $('#yukaltura_filetype', parent.document).val(fileType);\n                // Set natural width of selected media.\n                $('#yukaltura_naturalwidth', parent.document).val(naturalWidth);\n                // Set natural height of selected media.\n                $('#yukaltura_naturalheight', parent.document).val(naturalHeight);\n\n                // Enable Insert button.\n                $(\"#yukaltura_insert_btn\", parent.document).prop(\"disabled\", false);\n                $(\"#yukaltura_insert_btn\", parent.document).css({opacity: \"1.0\"});\n            }\n\n            /**\n             * This function removes hidden parameters in parent document.\n             * @access public\n             */\n            function removeParameters() {\n                $('#yukaltura_select_id', parent.document).remove();\n                $('#yukaltura_select_name', parent.document).remove();\n                $('#yukaltura_host', parent.document).remove();\n                $('#yukaltura_partnerid', parent.document).remove();\n                $('#yukaltura_uiconfid', parent.document).remove();\n                $('#yukaltura_playerstudio', parent.document).remove();\n                $('#yukaltura_width', parent.document).remove();\n                $('#yukaltura_height', parent.document).remove();\n                $('#yukaltura_filetype', parent.document).remove();\n                $('#yukaltura_naturalwidth', parent.document).remove();\n                $('#yukaltura_naturalheight', parent.document).remove();\n            }\n\n            $(\"#selectorSort\").on(\"change\", function() {\n                changeSort();\n            });\n\n            $(\".media_thumbnail\").on(\"click\", function(e) {\n                clickThumbnailImage(e);\n            });\n\n            removeParameters();\n            // Dsiable Insert button.\n            $('#yukaltura_insert_btn', parent.document).prop(\"disabled\", true);\n            $('#yukaltura_insert_btn', parent.document).css({opacity: \"0.5\"});\n        }\n    };\n});\n"],"file":"attoselector.min.js"}